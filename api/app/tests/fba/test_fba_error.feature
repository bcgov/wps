Feature: /fbc/

    Scenario: Fire Behaviour Calculation
        # NOTE: When writing requests, we already have stubs in place for the following station combinations:
        # (230,), (146,230), (322,346,335)
        Given <elevation>, <latitude>, <longitude>, <time_of_interest>, <wind_speed>, <wind_direction>, <percentage_conifer>, <percentage_dead_balsam_fir>, <grass_cure>, <crown_base_height>, <isi>, <bui>, <ffmc>, <dmc>, <dc>, <fuel_type>, <red_app_error_margin>
        Then ROS is within <spreadsheet_error_margin> of <spreadsheet_ros> with <note>
        And CFB is within <spreadsheet_error_margin> of <spreadsheet_cfb> with <note>
        And HFI is within <spreadsheet_error_margin> of <spreadsheet_hfi> with <note>
        And 1 HR Size is within <spreadsheet_error_margin> of <spreadsheet_1hr> with <note>
        And ROS is within <red_app_error_margin> of REDapp ROS
        And CFB is within <red_app_error_margin> of REDapp CFB
        And HFI is within <red_app_error_margin> of REDapp HFI
        And 1 HR Size is within <red_app_error_margin> of REDapp 1 HR Size

        # C1 The spreadsheet error margin is horrible (17%)! This must be improved!
        # C3 redapp error margin is off
        # C6 The redapp error margin is horrible (71%-80%)! This must be improved!
        # M1 The redapp error margin is HUGE!
        # M2 The redapp error margin is HUGE!
        # M4 Redapp margin bad.
        # Current target for margin of error: 1% (or 0.01)
        Examples:
            | fuel_type | elevation | latitude   | longitude    | time_of_interest | wind_speed | wind_direction | percentage_conifer | percentage_dead_balsam_fir | grass_cure | crown_base_height | isi  | bui   | ffmc | dmc   | dc    | red_app_error_margin | spreadsheet_error_margin | spreadsheet_ros | spreadsheet_hfi | spreadsheet_cfb | spreadsheet_1hr | note                               |
            | C1        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 2                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.07                 | 0.18                     | 5.22            | 2590.68         | 0.6             | 5.14            |                                    |
            | C2        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 3                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | 19.26           | 30072.67        | 1.0             | 69.86           |                                    |
            | C3        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 8                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.14                 | 0.005                    | 8.21            | 13097.75        | 0.7             | 12.70           |                                    |
            | C4        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 4                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.002                | 0.001                    | 18.77           | 31944.15        | 1.0             | 66.40           |                                    |
            | C5        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 18                | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.002                | 0.001                    | 3.19            | 4081.48         | -7.9            | 1.91            | Spreadsheet gives me -7.9 for CFB! |
            | C6        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 7                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.80                 | None                     | None            | None            | None            | None            | Spreadsheet doesn't do C6          |
            | C6        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 2                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.71                 | None                     | None            | None            | None            | None            | Spreadhseet doesn't do C6          |
            | C7        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | 10                | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.011                    | 4.07            | 4089.57         | -0.9            | 3.12            | Spreadsheet has a negative CFB!    |
            | D1        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 100                | None                       | None       | None              | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do D1          |
            | M1        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 75                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.06                 | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M1          |
            | M1        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 50                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.16                 | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M1          |
            | M1        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 25                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.63                 | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M1          |
            | M2        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 75                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.015                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M2          |
            | M2        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 50                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.077                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M2          |
            | M2        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | 25                 | None                       | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 2.8                  | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M2          |
            | M3        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 30                         | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.006                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M3          |
            | M3        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 60                         | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M3          |
            | M3        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 100                        | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M3          |
            | M4        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 30                         | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.06                 | None                     | None            | None            | None            | None            | Spreadsheet doesn't do M4          |
            | M4        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 60                         | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.007                | 0.001                    | None            | None            | None            | None            | Spreadsheet doesn't do M4          |
            | M4        | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | 100                        | None       | 6                 | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            | None            | Spreadsheet doesn't do M4          |
            | O1A       | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 25         | None              | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.17                     | 0.63            | 56.94           | None            | 0.08            |                                    |
            | O1A       | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 50         | None              | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.17                     | 3.54            | 318.58          | None            | 2.36            |                                    |
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 100        | None              | O1A       | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 25         | None              | O1B       | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 50         | None              | O1B       | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | 100        | None              | O1B       | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | None       | None              | S1        | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | 0.001                | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | None       | None              | S2        | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | None                 | 0.001                    | None            | None            | None            ||
# | 780       | 50.6733333 | -120.4816667 | 2021-07-12       | 6.2        | 3              | None               | None                       | None       | None              | S3        | 11.5 | 186.8 | 94.8 | 126.1 | 900.3 | None                 | 0.001                    | None            | None            | None            ||


